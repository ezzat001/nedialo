{% load static%}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    


<style>
              /* dark_mode_scrollbar.css */

        /* For WebKit browsers (Chrome, Safari) */
        ::-webkit-scrollbar {
          width: 8px; /* Thin scrollbar */
        }

        ::-webkit-scrollbar-track {
          background: transparent; /* Transparent background */
        }

        ::-webkit-scrollbar-thumb {
          background-color: #333; /* Darker grey main color */
          border-radius: 10px;
          border: 2px solid transparent; /* Transparent border */
        }

        ::-webkit-scrollbar-thumb:hover {
          background: #555; /* Lighter grey on hover */
        }

        /* For Firefox */
        scrollbar-width: thin;
        scrollbar-color: #333 transparent; /* Darker grey main color and transparent background */

        /* For Internet Explorer and Edge */
        body {
          -ms-overflow-style: scrollbar;
        }


</style>




<!-- Font Awesome Icons -->
<script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
crossorigin=""/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icons/5.0.0/css/flag-icons.min.css">



<title>
        {{settings.company_name}}
    </title>
    



    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>

            

            var heartbeatInterval = 50000;  // Heartbeat interval in milliseconds (50 seconds)
            var heartbeatTimer;  // Variable to hold the interval timer

            function startHeartbeat() {
                heartbeatTimer = setInterval(function() {
                    $.ajax({
                        url: '/heartbeat/',
                        method: 'GET',
                        success: function(data) {
                            console.log('Heartbeat successful.');
                        },
                        error: function(xhr, status, error) {
                            if (xhr.status === 0) {
                                console.log('Connection timed out.');
                                handleConnectionTimeout();
                            }
                        }
                    });
                }, heartbeatInterval);
            }

            function handleConnectionTimeout() {
                // Action when connection times out (e.g., show message to the user)
                location.reload();

            }

            // Start heartbeat on page load
            $(document).ready(function() {
                startHeartbeat();
            });

            // Stop heartbeat when the page is being unloaded (e.g., user closes the page)
            $(window).on('beforeunload', function() {
                clearInterval(heartbeatTimer);
            });

    </script>


    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Function to format duration from seconds to HH:MM:SS
        function formatDuration(seconds) {
            if (isNaN(seconds) || seconds < 0) {
                return '00:00:00'; // Return default value if input is invalid
            }
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60); // Ensure seconds are an integer
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function formatDurationToHoursMinutes(seconds) {
          if (isNaN(seconds) || seconds < 0) {
              return '00:00'; // Return default value if input is invalid
          }
          const hours = Math.floor(seconds / 3600);
          const minutes = Math.floor((seconds % 3600) / 60);
          return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
      }
      
    
        const companyName = "{{ settings.company_name }}";
        const breakPaid = {{ settings.break_paid|yesno:"true,false" }}; // Convert Django boolean to JS boolean
    
        // Function to update the clock display
        function updateClock() {
            const now = new Date();
            const lastStatusChangeStr = document.getElementById('last-status-change').value; // Use .value for hidden input
            const currentStatus = document.getElementById('current-status').innerText.toLowerCase();
    
            if (currentStatus === 'offline' || !currentStatus ) {
                document.getElementById('working-hours').innerText = 'Offline';
                document.title = companyName + ' - Offline';
                return;
            }

            
    
            if (lastStatusChangeStr) {
                const lastStatusChange = new Date(lastStatusChangeStr);
                if (isNaN(lastStatusChange.getTime())) {
                    console.error('Invalid last status change date:', lastStatusChangeStr);
                    document.getElementById('working-hours').innerText = '00:00:00';
                    document.title = `${document.getElementById('current-status').innerText} - 00:00:00`;
                    return;
                }
    
                const duration = Math.floor((now - lastStatusChange) / 1000); // Duration in seconds
    
                document.getElementById('working-hours').innerText = formatDurationToHoursMinutes(duration);
                document.title = `${document.getElementById('current-status').innerText} - ${formatDurationToHoursMinutes(duration)}`;
            } else {
                console.error('Last status change date is missing');
                document.getElementById('working-hours').innerText = '00:00:00';
                document.title = `${document.getElementById('current-status').innerText} - 00:00:00`;
            }
        }
    
        // Function to update work status and UI
        function updateWorkStatus(status) {
          const userId = document.querySelector('select[data-user-id]').dataset.userId;
          const assignedCredentials = document.querySelector('select[data-user-id]').dataset.hasCredentials;
          
          /*
          if (assignedCredentials === 'none' || assignedCredentials === '' || assignedCredentials.toLowerCase() === 'no') {
            Swal.fire({
              title: 'Error!',
              text: "You Can't Change the status since there's no assigned credentials.",
              icon: 'error',
              confirmButtonText: 'OK',
              customClass: {
                confirmButton: 'btn bg-gradient-info'
              }
            });
            // Reset the select back to the previous value if needed
            $(this).val(''); // Resetting to an empty state; you may set it to a specific value if required
            return; // Exit the function if no credentials
          }  
          */
          
            fetch('/update-status/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': getCookie('csrftoken') // Include CSRF token for security
                },
                body: new URLSearchParams({ 'status': status })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const formattedStatus = data.new_status.charAt(0).toUpperCase() + data.new_status.slice(1);
                    document.getElementById('current-status').innerText = formattedStatus;
                    document.getElementById('last-status-change').value = new Date(data.last_status_change).toISOString(); // Update hidden input
                    document.getElementById('ready-time').innerText = formatDuration(data.ready_time);
                    document.getElementById('meeting-time').innerText = formatDuration(data.meeting_time);
                    document.getElementById('break-time').innerText = formatDuration(data.break_time);
                    document.getElementById('login-time').innerText = data.login_time;

                    if (document.getElementById('login-time-av')) {
                      document.getElementById('login-time-av').innerText = data.login_time;
                    }
                    if (document.getElementById('ready-time-av')) {
                      document.getElementById('ready-time-av').innerText = formatDuration(data.ready_time);
                    }
                    
                    if (document.getElementById('meeting-time-av')) {
                        document.getElementById('meeting-time-av').innerText = formatDuration(data.meeting_time);
                    }
                    
                    if (document.getElementById('break-time-av')) {
                        document.getElementById('break-time-av').innerText = formatDuration(data.break_time);
                    }
                    // Update the title with the new status
                    document.title = `${formattedStatus} - 00:00:00`;
    
                    // Calculate and update total hours
                    updateTotalHours(data);
    
                    // Trigger the clock update
                    updateClock();
                    fetchWorkStatusData();
                } else {
                    console.error('Failed to update status:', data.error);
                }
            })
            .catch(error => console.error('Error:', error));
        }
    
        // Function to get CSRF token
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
    
        // Function to fetch and update work status data
        function fetchWorkStatusData() {
            const currentStatus = document.getElementById('current-status').innerText.toLowerCase();
    
            if (true) { // Only fetch data if not offline
                fetch('/work-status-data/')
                    .then(response => response.json())
                    .then(data => {
                        const workStatusSelect = document.getElementById('work_status');
                        workStatusSelect.value = data.current_status;
    
                        document.getElementById('login-time').innerText = data.login_time;
                        document.getElementById('ready-time').innerText = formatDuration(data.ready_time);
                        document.getElementById('meeting-time').innerText = formatDuration(data.meeting_time);
                        document.getElementById('break-time').innerText = formatDuration(data.break_time);

                        if (document.getElementById('login-time-av')) {
                          document.getElementById('login-time-av').innerText = data.login_time;
                      }
                        if (document.getElementById('ready-time-av')) {
                          document.getElementById('ready-time-av').innerText = formatDuration(data.ready_time);
                      }
                      
                      if (document.getElementById('meeting-time-av')) {
                          document.getElementById('meeting-time-av').innerText = formatDuration(data.meeting_time);
                      }
                      
                      if (document.getElementById('break-time-av')) {
                          document.getElementById('break-time-av').innerText = formatDuration(data.break_time);
                      }
                        // Update the last status change
                        document.getElementById('last-status-change').value = new Date(data.last_status_change).toISOString(); // Update hidden input
    
                        // Update the title with the current status
                        const formattedStatus = data.current_status.charAt(0).toUpperCase() + data.current_status.slice(1);
                        document.title = `${formattedStatus} - 00:00:00`;
    
                        // Calculate and update total hours
                        updateTotalHours(data);
    
                        // Initialize the clock
                        if (currentStatus !== 'offline') {
                          updateClock();
                        }
                        else {
                            document.getElementById('working-hours').innerText = 'Offline';
                            document.title = companyName + ' - Offline';
                        }
                    });
            }
        }
    
        // Function to update total hours display
        function updateTotalHours(data) {
            const readyTimeSeconds = data.ready_time;
            const meetingTimeSeconds = data.meeting_time;
            const breakTimeSeconds = data.break_time;
    
            // Total non-paid hours: sum of Ready, Meeting, and Break times
            const totalHoursNon = readyTimeSeconds + meetingTimeSeconds + breakTimeSeconds;
            document.getElementById('total-hours-non').innerText = formatDuration(totalHoursNon);
            if (document.getElementById('total-hours-non-av')) {
              document.getElementById('total-hours-non-av').innerText = formatDuration(totalHoursNon);
          }
            // Total paid hours based on whether Break is paid or not
            const totalHoursPaid = breakPaid ? totalHoursNon : readyTimeSeconds + meetingTimeSeconds;
            document.getElementById('total-hours-paid').innerText = formatDuration(totalHoursPaid);
            if (document.getElementById('total-hours-paid-av')) {
              document.getElementById('total-hours-paid-av').innerText = formatDuration(totalHoursPaid);
          }
        }
    
        // Fetch initial work status data
        fetchWorkStatusData();
    
        // Fetch updated work status data every 30 seconds, only if status is not offline
        setInterval(fetchWorkStatusData, 30000); // Adjust the interval as needed
    
        // Add event listener to the select field
        document.getElementById('work_status').addEventListener('change', handleStatusChange);
    
        function handleStatusChange() {

          

            const selectedStatus = document.getElementById('work_status').value;
           
            updateWorkStatus(selectedStatus);

        }
    });
    
    </script>
    
    
    


    <span id="current-status" hidden>{{ work_status.current_status|capfirst }}</span>
    <span id="working-hours" hidden>00:00:00</span>
    <span id="last-status-change" hidden>{{ work_status.last_status_change|date:"c" }}</span>

    <span id="login-time" class="text-dark text-xs" hidden>00:00:00</span>

    <span id="ready-time" class="text-dark text-xs" hidden>00:00:00</span>

    <span id="meeting-time" class="text-dark text-xs" hidden>00:00:00</span>
  
    <span id="break-time" class="text-dark text-xs" hidden>00:00:00</span>

    <span id="total-hours-non" class="text-dark text-xs" hidden>00:00:00</span>
             
    <span id="total-hours-paid" class="text-dark text-xs" hidden>00:00:00</span>
  



<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>
    {% with slashes=request.path|length %}
        {% if slashes > 2 %}


            <!-- CSS Files -->
            <link id="pagestyle" href="../static/css/material-dashboard.css?v=3.0.5" rel="stylesheet" />
            <script src="../static/js/plugins/datatables.js"></script>
            <script src="../static/js/plugins/choices.min.js"></script>
            <script src="../static/js/plugins/perfect-scrollbar.min.js"></script>
            <script src="../static/js/plugins/smooth-scrollbar.min.js"></script>

 
        

        {% else %}

            <!-- CSS Files -->
            <link id="pagestyle" href="static/css/material-dashboard.css?v=3.0.5" rel="stylesheet" />
            <script src="static/js/plugins/datatables.js"></script>
            <script src="static/js/plugins/choices.min.js"></script>
            <script src="static/js/plugins/perfect-scrollbar.min.js"></script>
            <script src="static/js/plugins/smooth-scrollbar.min.js"></script>


        {% endif %}
    {% endwith %}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        // Replace '{{ profile.settings_theme }}' with the actual Django variable
        var settingsTheme = '{{ profile.settings_theme }}'; 
        console.log('Current settingsTheme:', settingsTheme); // Check the value in the console
        
        // Get the hidden checkbox element
        var darkModeToggle = document.getElementById('dark-version');
        
        // Set the checkbox state based on settingsTheme
        if (settingsTheme === 'dark') {
            darkModeToggle.checked = false;
            darkMode(darkModeToggle);
            console.log('Dark Mode', settingsTheme); // Check the value in the console


        } else {
            darkModeToggle.checked = true;
            console.log('Light mode', settingsTheme); // Check the value in the console


        }

        // Call your darkMode function with the hidden checkbox
        });
    </script>


  
    
</head>

<body class="g-sidenav-show  bg-gray-200">
<input hidden class="form-check-input mt-1 ms-auto" type="checkbox" id="dark-version" >

  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3   bg-gradient-dark" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0 d-flex justify-content-center align-items-center" target="_blank">
        <img src="{{settings.logo_main.url}}" style="width: {{settings.logo_dashboard_width}}; height: {{settings.logo_dashboard_height}};" class="navbar-brand-img h-100" alt="main_logo">
        <span class="ms-1 font-weight-bold text-white"></span>
      </a>
    </div>
    <hr class="horizontal light mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto h-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item mb-2 mt-0">
          <a data-bs-toggle="collapse" href="#ProfileNav" class="nav-link text-white" aria-controls="ProfileNav" role="button" aria-expanded="{% if request.path == '/settings' %}true{% endif %}">
              <img src="{% if profile.picture and profile.picture.url %} {{profile.picture.url}} {% else %} ../static/img/default-profile.png{% endif %}" class="avatar">
            <span class="nav-link-text ms-2 ps-1">{% if profile %}{{profile.full_name}}{% else %} Guest {% endif %}</span>
          </a>
          <div class="collapse {% if request.path == '/settings' %}show{% endif %}" id="ProfileNav" style="">
            <ul class="nav ">
              <li class="nav-item {% if request.path == '/settings' %}active{% endif %}">
                <a class="nav-link text-grey {% if request.path == '/settings' %}active{% endif %}" href="/settings" target="_parent">
                  <span class="material-icons"> person </span>
                  <span class="sidenav-normal  ms-3  ps-1"> My Profile </span>
                </a>
              </li>
             
              <li class="nav-item">
                <a class="nav-link text-grey " href="/logout" target="_parent">
                  <span class="material-icons">logout</span>
                  <span class="sidenav-normal  ms-3  ps-1"> Logout </span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <hr class="horizontal light mt-0">

        {% if perms.caller_dashboard %}
        <li class="nav-item">
          <a class="nav-link {% if request.path == '/' %}active{% endif %}"  href="/" target="_parent">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">widgets</i>
            <span class="nav-link-text ms-2 ps-1">Dashboard</span>
          </a>
        </li>
        {% endif %}


        {% if perms.affiliate_dashboard %}
        <li class="nav-item">
          <a class="nav-link {% if  '/affiliate-dashboard/' in request.path %}active{% endif %}"  href="/affiliate-dashboard/{{current_month}}-{{current_year}}" target="_parent">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">widgets</i>
            <span class="nav-link-text ms-2 ps-1">Affiliate Dashboard</span>
          </a>
        </li>
        {% endif %}

        <!--
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#trainingResources" class="nav-link text-white " aria-controls="authExamples" role="button" aria-expanded="false">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">menu_book</i>
            <span class="nav-link-text ms-2 ps-1">Training Resources</span>
          </a>
          <div class="collapse " id="trainingResources">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-grey " href="/training-material" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> school </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Training Material <b class="caret"></b></span>
                </a>
              </li>

              <li class="nav-item">
                <a class="nav-link text-grey " href="../../../pages/authentication/signin/basic.html" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> menu_book </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Knowledge Base </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-grey " href="../../../pages/authentication/signin/cover.html" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> verified </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Certificates </span>
                </a>
              </li>

            </ul>
          </div>
        </li>
        -->

        <!--
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#campaingscategory" class="nav-link text-white " aria-controls="authExamples" role="button" aria-expanded="false">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">ads_click</i>
            <span class="nav-link-text ms-2 ps-1">Campaigns</span>
          </a>
          <div class="collapse " id="campaingscategory">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-grey " href="/active-campaigns" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> check_circle </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Active Campaigns <b class="caret"></b></span>
                </a>
              </li>

              <li class="nav-item">
                <a class="nav-link text-grey " href="/inactive-campaigns" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> block </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Inactive Campaigns </span>
                </a>
              </li>
              
               
              
            </ul>
          </div>
        </li>
        -->

        
        {% if perms.my_leads or perms.lead_scoring or perms.leaderboard %}

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#leadscategory" class="nav-link text-white {% if '/my-leads/' in request.path or '/lead-scoring/' in request.path or '/leads-leaderboard/' in request.path or '/lead-report/' in request.path %}active{% endif %}" aria-controls="authExamples" role="button" aria-expanded="{% if '/my-leads/' in request.path or '/lead-scoring/' in request.path or '/leads-leaderboard/' in request.path or '/lead-report/' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">house</i>
            <span class="nav-link-text ms-2 ps-1 active">Leads</span>
          </a>
          <div class="collapse {% if '/my-leads/' in request.path or '/lead-scoring/' in request.path or '/leads-leaderboard/' in request.path  or '/lead-report/' in request.path %}show{% endif %}" id="leadscategory">
            <ul class="nav">
              {% if perms.my_leads %}

              <li class="nav-item {% if '/my-leads/' in request.path or '/lead-report/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/my-leads/' in request.path or '/lead-report/' in request.path %}active{% endif %}" href="/my-leads/{{ current_month }}-{{ current_year }}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">home</span>
                  <span class="sidenav-normal ms-2 ps-1">My Leads <b class="caret"></b></span>
                </a>
              </li>

              {% endif %}

              {% if perms.lead_scoring %}

        
              <li class="nav-item {% if '/lead-scoring/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/lead-scoring/' in request.path %}active{% endif %}" href="/lead-scoring/{{ current_month }}-{{ current_year }}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">star_border</span>
                  <span class="sidenav-normal ms-2 ps-1">Leads Scoring</span>
                </a>
              </li>
        
              {% endif %}

              {% if perms.leaderboard %}

              <li class="nav-item {% if '/leads-leaderboard/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/leads-leaderboard/' in request.path %}active{% endif %}" href="/leads-leaderboard/{{ current_month }}-{{ current_year }}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">emoji_events</span>
                  <span class="sidenav-normal ms-2 ps-1">Leaderboard</span>
                </a>
              </li>

              {% endif %}
            </ul>
          </div>
        </li>

        {% endif %}
        
        
        
        
        


        {% if perms.leave_request or perms.prepayment_request or perms.action_request %}


        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#requestscategory" class="nav-link text-white {% if '/leave-requests' in request.path or '/prepayment-requests' in request.path or '/action-requests' in request.path %}active{% endif %}" aria-controls="requestscategory" role="button" aria-expanded="{% if '/leave-requests' in request.path or '/prepayment-requests' in request.path or '/action-requests' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">flag</i>
            <span class="nav-link-text ms-2 ps-1">Requests</span>
          </a>
          <div class="collapse {% if '/leave-requests' in request.path or '/prepayment-requests' in request.path or '/action-requests' in request.path %}show{% endif %}" id="requestscategory">
            <ul class="nav">

              {% if perms.leave_request  %}

              <li class="nav-item {% if '/leave-requests' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/leave-requests' in request.path %}active{% endif %}" href="/leave-requests" target="_parent">
                  <span class="sidenav-mini-icon material-icons">event_busy</span>
                  <span class="sidenav-normal ms-2 ps-1">Leaves Request <b class="caret"></b></span>
                </a>
              </li>

              {% endif %}

              {% if perms.prepayment_request %}
        
              <li class="nav-item {% if '/prepayment-requests' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/prepayment-requests' in request.path %}active{% endif %}" href="/prepayment-requests" target="_parent">
                  <span class="sidenav-mini-icon material-icons">attach_money</span>
                  <span class="sidenav-normal ms-2 ps-1">Prepayments Request <b class="caret"></b></span>
                </a>
              </li>

              {% endif %}


              {% if perms.action_request%}
        
              <li class="nav-item {% if '/action-requests' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/action-requests' in request.path %}active{% endif %}" href="/action-requests" target="_parent">
                  <span class="sidenav-mini-icon material-icons">report_problem</span>
                  <span class="sidenav-normal ms-2 ps-1">Actions Request</span>
                </a>
              </li>
              
              {% endif %}
            
            </ul>
          </div>
        </li>

        {% endif %}
        

        {% if perms.leave_handling or perms.prepayment_handling or perms.action_handling %}


        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#requestshandlingcategory" class="nav-link text-white {% if '/leave-handling' in request.path or '/prepayments-handling' in request.path or '/action-handling' in request.path or '/leave-report/' in request.path or '/action-report/' in request.path or '/prepayment-report/' in request.path  %}active{% endif %}" aria-controls="requestshandlingcategory" role="button" aria-expanded="{% if '/leave-handling' in request.path or '/prepayments-handling' in request.path or '/action-handling' in request.path or '/leave-report/' in request.path or '/action-report/' in request.path or '/prepayment-report/' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">eject</i>
            <span class="nav-link-text ms-2 ps-1">Requests Handling</span>
          </a>
          <div class="collapse {% if '/leave-handling' in request.path or '/prepayments-handling' in request.path or '/action-handling' in request.path or '/leave-report/' in request.path or '/action-report/' in request.path or '/prepayment-report/' in request.path %}show{% endif %}" id="requestshandlingcategory">
            <ul class="nav">

              {% if perms.leave_handling %}

              <li class="nav-item {% if '/leave-handling' in request.path  or '/leave-report/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/leave-handling' in request.path or '/leave-report/' in request.path %}active{% endif %}" href="/leave-handling" target="_parent">
                  <span class="sidenav-mini-icon material-icons">event_busy</span>
                  <span class="sidenav-normal ms-2 ps-1">Leaves Handling <b class="caret"></b></span>
                </a>
              </li>

              {% endif %}

              
              {% if perms.prepayment_handling %}
              <li class="nav-item {% if '/prepayments-handling' in request.path or '/prepayment-report/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/prepayments-handling' in request.path or '/prepayment-report/' in request.path %}active{% endif %}" href="/prepayments-handling" target="_parent">
                  <span class="sidenav-mini-icon material-icons">attach_money</span>
                  <span class="sidenav-normal ms-2 ps-1">Prepayments Handling</span>
                </a>
              </li>

              {% endif %}
        
              {% if perms.action_handling %}

              <li class="nav-item {% if '/action-handling' in request.path or '/action-report/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/action-handling' in request.path or '/action-report/' in request.path %}active{% endif %}" href="/action-handling" target="_parent">
                  <span class="sidenav-mini-icon material-icons">report_problem</span>
                  <span class="sidenav-normal ms-2 ps-1">Actions Handling</span>
                </a>
              </li>

              {% endif %}
              
            </ul>
          </div>
        </li>
        

        {% endif %}


        {% if perms.qa_pending or perms.qa_lead_reports or perms.qa_auditing or perms.qa_agents_table %}


        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#qualitycategory" class="nav-link text-white {% if '/quality-pending' in request.path or '/lead-reports/' in request.path or '/feedbacks' == request.path or '/quality-agents/' in request.path or '/lead-handling/' in request.path or '/feedback-report/' in request.path %}active{% endif %}" aria-controls="qualitycategory" role="button" aria-expanded="{% if '/quality-pending' in request.path or '/lead-reports/' in request.path or '/feedbacks' == request.path or '/quality-agents/' in request.path or '/lead-handling/' in request.path or '/feedback-report/' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">verified_user</i>
            <span class="nav-link-text ms-2 ps-1">QA & Auditing</span>
          </a>
          <div class="collapse {% if '/quality-pending' in request.path or '/lead-reports/' in request.path or '/feedbacks' == request.path or '/quality-agents/' in request.path or '/lead-handling/' in request.path or '/feedback-report/' in request.path %}show{% endif %}" id="qualitycategory">
            <ul class="nav">

              {% if perms.qa_pending %}
              <li class="nav-item {% if '/quality-pending' in request.path or '/lead-handling/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/quality-pending' in request.path or '/lead-handling/' in request.path %}active{% endif %}" href="/quality-pending" target="_parent">
                  <span class="sidenav-mini-icon material-icons">update</span>
                  <span class="sidenav-normal ms-2 ps-1">Pending Leads <b class="caret"></b></span>
                </a>
              </li>
              {% endif %}


              {% if perms.qa_lead_reports  %}
        
              <li class="nav-item {% if '/lead-reports/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/lead-reports/' in request.path %}active{% endif %}" href="/lead-reports/{{current_month}}-{{current_year}}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">description</span>
                  <span class="sidenav-normal ms-2 ps-1">Lead Reports</span>
                </a>
              </li>

              {% endif %}
        

              {% if perms.qa_auditing %}
              <li class="nav-item {% if '/feedbacks' == request.path or '/feedback-report/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/feedbacks' == request.path or '/feedback-report/' in request.path %}active{% endif %}" href="/feedbacks" target="_parent">
                  <span class="sidenav-mini-icon material-icons">feedback</span>
                  <span class="sidenav-normal ms-2 ps-1">Auditing Feedbacks</span>
                </a>
              </li>

              {% endif %}


              {% if perms.qa_agents_table %}

        
              <li class="nav-item {% if '/quality-agents/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/quality-agents/' in request.path %}active{% endif %}" href="/quality-agents/{{current_month}}-{{current_year}}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">supervisor_account</span>
                  <span class="sidenav-normal ms-2 ps-1">QA Agents</span>
                </a>
              </li>

              {% endif %}
        
            </ul>
          </div>
        </li>
        
        {% endif %}



        {% if perms.seats or perms.camp_hours  %}

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#campaignhours" class="nav-link text-white {% if '/seats' in request.path or '/camphours-daily/' in request.path or '/camphours-monthly/' in request.path or '/camphours-yearly/' in request.path or '/agent-seat-breakdown/' in request.path or '/seat-breakdown/' in request.path %}active{% endif %}" aria-controls="campaignhours" role="button" aria-expanded="{% if '/seats' in request.path or '/camphours-daily/' in request.path or '/camphours-monthly/' in request.path or '/camphours-yearly/' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">timer</i>
            <span class="nav-link-text ms-2 ps-1">Campaign Hours</span>
          </a>
          <div class="collapse {% if '/seats' in request.path or '/camphours-daily/' in request.path or '/camphours-monthly/' in request.path or '/camphours-yearly/' in request.path or '/agent-seat-breakdown/' in request.path or '/seat-breakdown/' in request.path %}show{% endif %}" id="campaignhours">
            <ul class="nav ">

              {% if perms.seats %}
              <li class="nav-item {% if '/seats' in request.path or '/agent-seat-breakdown/' in request.path or '/seat-breakdown/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/seats' in request.path or '/agent-seat-breakdown/' in request.path or '/seat-breakdown/' in request.path %}active{% endif %}" href="/seats" target="_parent">
                  <span class="sidenav-mini-icon material-icons">group</span>
                  <span class="sidenav-normal ms-2 ps-1">Seats</span>
                </a>
              </li>

              {% endif %}
              
              {% if perms.camp_hours %}

              {% for caller_camp in callers_campaigns %}
              <li class="nav-item ">
                <a class="nav-link text-grey " data-bs-toggle="collapse" aria-expanded="{% if '/camphours-daily/'|add:caller_camp.id|add:'-'|add:current_month|add:'-'|add:current_year in request.path %}true{% else %}false{% endif %}" href="#camphours-{{caller_camp}}">
                  <span class="sidenav-mini-icon material-icons">  </span>
                  <span class="sidenav-normal  ms-2  ps-1"> {{caller_camp}} <b class="caret"></b></span>
                </a>
                <div class="collapse " id="camphours-{{caller_camp}}">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/camphours-daily/{{caller_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Daily Reports </span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/camphours-monthly/{{caller_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Monthly Reports </span>
                      </a>
                    </li>   
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/camphours-yearly/{{caller_camp.id}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Yearly Reports </span>
                      </a>
                    </li>   
                  </ul>
                </div>
              </li>
              {% endfor %}

              {% endif %}

              
            </ul>
          </div>
        </li>

        {% endif %}

        {% if perms.camp_leads %}

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#campaignleads" class="nav-link text-white {% if '/all-campaigns-performance/' in request.path or '/campleads-daily/' in request.path or '/campleads-monthly/' in request.path or '/campleads-yearly/' in request.path %}active{% endif %}" aria-controls="campaignleads" role="button" aria-expanded="{% if '/all-campaigns-performance/' in request.path or '/campleads-daily/' in request.path or '/campleads-monthly/' in request.path or '/campleads-yearly/' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">trending_up</i>
            <span class="nav-link-text ms-2 ps-1">Campaign Leads</span>
          </a>
          <div class="collapse {% if '/all-campaigns-performance/' in request.path or '/campleads-daily/' in request.path or '/campleads-monthly/' in request.path or '/campleads-yearly/' in request.path %}show{% endif %}" id="campaignleads">
            <ul class="nav ">
              <li class="nav-item {% if '/all-campaigns-performance/' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/all-campaigns-performance/' in request.path %}active{% endif %}" href="/all-campaigns-performance/{{current_month}}-{{current_year}}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">bar_chart</span>
                  <span class="sidenav-normal ms-2 ps-1"> Overall Performance </span>
                </a>
              </li>
        
              {% for caller_camp in callers_campaigns %}
              <li class="nav-item ">
                <a class="nav-link text-grey" data-bs-toggle="collapse" aria-expanded="{% if '/campleads-daily/'|add:caller_camp.id|add:'-'|add:current_month|add:'-'|add:current_year in request.path %}true{% else %}false{% endif %}" href="#campleads-{{caller_camp}}">
                  <span class="sidenav-mini-icon material-icons"> </span>
                  <span class="sidenav-normal ms-2 ps-1"> {{caller_camp}} <b class="caret"></b></span>
                </a>
                <div class="collapse " id="campleads-{{caller_camp}}">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/campleads-daily/{{caller_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1"> Daily Reports </span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/campleads-monthly/{{caller_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1"> Monthly Reports </span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/campleads-yearly/{{caller_camp.id}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1"> Yearly Reports </span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </li>

        {% endif %}      
        
        
        {% if perms.sales_dashboard or perms.sales_lookerstudio or perms.sales_performance %}


        <li class="nav-item">

          <a data-bs-toggle="collapse" href="#salesoutleads" class="nav-link text-white 
            {% if '/sales-dashboard' in request.path or '/sales-calendar' in request.path or '/sales-lookerstudio' in request.path or '/campleads-sales' in request.path %}active{% endif %}" 
            aria-controls="salesoutleads" role="button" aria-expanded="{% if '/sales-dashboard' in request.path or '/sales-calendar' in request.path or '/sales-lookerstudio' in request.path or '/campleads-sales' in request.path %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">attach_money</i>
            <span class="nav-link-text ms-2 ps-1">Sales & Outreach</span>
          </a>

          
          <div class="collapse {% if '/sales-dashboard' in request.path or '/sales-calendar' in request.path or '/sales-lookerstudio' in request.path or '/campleads-sales' in request.path %}show{% endif %}" id="salesoutleads">
            <ul class="nav">

              {% if perms.sales_dashboard %}

              
              <li class="nav-item {% if '/sales-dashboard' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/sales-dashboard' in request.path %}active{% endif %}" href="/sales-dashboard-{{current_year}}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">dashboard</span>
                  <span class="sidenav-normal ms-2 ps-1">Sales Dashboard</span>
                </a>
              </li>
              
              {% endif %}


              {% if perms.sales_dashboard  %}
              <li class="nav-item {% if '/sales-calendar' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/sales-calendar' in request.path %}active{% endif %}" href="/sales-calendar-{{current_month}}-{{current_year}}" target="_parent">
                  <span class="sidenav-mini-icon material-icons">today</span>
                  <span class="sidenav-normal ms-2 ps-1">Sales Calendar</span>
                </a>
              </li>

              {% endif %}
              

              {% if perms.sales_lookerstudio %}

              <li class="nav-item {% if '/sales-lookerstudio' in request.path %}active{% endif %}">
                <a class="nav-link text-grey {% if '/sales-lookerstudio' in request.path %}active{% endif %}" href="/sales-lookerstudio" target="_parent">
                  <span class="sidenav-mini-icon material-icons">query_stats</span>
                  <span class="sidenav-normal ms-2 ps-1">Looker Studio</span>
                </a>
              </li>

              {% endif %}
              
              <!-- 
              {% for sales_camp in sales_campaigns %}
              <li class="nav-item {% if '/campleads-sales' in request.path %}active{% endif %}">
                <a class="nav-link text-grey" data-bs-toggle="collapse" href="#campleadsoutreach-{{sales_camp.id}}" aria-expanded="{% if '/campleads-sales-' in request.path %}true{% else %}false{% endif %}">
                  <span class="sidenav-normal ms-2 ps-1">{{sales_camp}} <b class="caret"></b></span>
                </a>
                <div class="collapse {% if '/campleads-sales-' in request.path %}show{% endif %}" id="campleadsoutreach-{{sales_camp.id}}">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted {% if '/campleads-sales-daily/' in request.path %}active{% endif %}" href="/campleads-sales-daily/{{sales_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1">Daily Reports</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-muted {% if '/campleads-sales-monthly/' in request.path %}active{% endif %}" href="/campleads-sales-monthly/{{sales_camp.id}}-{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1">Monthly Reports</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link text-muted {% if '/campleads-sales-yearly/' in request.path %}active{% endif %}" href="/campleads-sales-yearly/{{sales_camp.id}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal ms-2 ps-1">Yearly Reports</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
              {% endfor %}

              -->
              
            </ul>
          </div>
        </li>
        
        {% endif %}

        {% if perms.agents_table or  perms.working_hours or perms.attendance_monitor or perms.lateness_monitor  %}

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#agentscategory" class="nav-link text-white {% if '/agents-list' in request.path or '/working-hours' in request.path or '/attendance-monitor' in request.path  or '/lateness-monitor' in request.path or '/agent-leads/' in request.path or '/feedbacks-agent/' in request.path  %}active{% endif %}" aria-controls="authExamples" role="button" aria-expanded="{% if '/agents-list' in request.path or '/working-hours' in request.path or '/attendance-monitor' in request.path or '/lateness-monitor' in request.path or '/agent-leads/' in request.path or  '/feedbacks-agent/' in request.path  %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">people</i>
            <span class="nav-link-text ms-2 ps-1">Agents</span>
          </a>
          <div class="collapse {% if '/agents-list' in request.path or '/working-hours' in request.path or '/attendance-monitor' in request.path  or '/lateness-monitor' in request.path or '/agent-leads/'  in request.path or '/feedbacks-agent/' in request.path %}show{% endif %} " id="agentscategory">
            <ul class="nav ">

              
              <li class="nav-item ">
                {% if perms.agents_table %}

                <a class="nav-link text-grey " data-bs-toggle="collapse" aria-expanded="false" href="#aglistdata">
                  <span class="sidenav-mini-icon material-icons"> account_circle </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Agents List <b class="caret"></b></span>
                </a>

                {% endif %}


                <div class="collapse " id="aglistdata">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/agents-list-company" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Company Data </span>
                      </a>
                    </li>
                    {% for team in callers_teams %}
                      <li class="nav-item">
                        <a class="nav-link text-muted " href="/agents-list-team/{{team.id}}" target="_parent">
                          <span class="sidenav-normal  ms-2  ps-1"> {{team.team_name}} </span>
                        </a>
                      </li>   
                    {% endfor %}
                  </ul>
                </div>

              </li>

              {% if perms.working_hours %}

              <li class="nav-item ">
                <a class="nav-link text-grey " data-bs-toggle="collapse" aria-expanded="false" href="#whdata">
                  <span class="sidenav-mini-icon material-icons"> timer </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Working Hours <b class="caret"></b></span>
                </a>
                <div class="collapse " id="whdata">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/working-hours-company/{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Company Data </span>
                      </a>
                    </li>
                    {% for team in callers_teams %}
                      <li class="nav-item">
                        <a class="nav-link text-muted " href="/working-hours-team/{{team.id}}-{{current_month}}-{{current_year}}" target="_parent">
                          <span class="sidenav-normal  ms-2  ps-1"> {{team.team_name}} </span>
                        </a>
                      </li>   
                    {% endfor %}
                  </ul>
                </div>
              </li>
              
              {% endif %}

              {% if perms.attendance_monitor %}

              <li class="nav-item">
                <a class="nav-link text-grey " data-bs-toggle="collapse" aria-expanded="false" href="#amdata" >
                  <span class="sidenav-mini-icon material-icons"> today </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Attendance Monitor </span>
                </a>
                <div class="collapse " id="amdata">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/attendance-monitor-company/{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Company Data </span>
                      </a>
                    </li>
                    {% for team in callers_teams %}
                      <li class="nav-item">
                        <a class="nav-link text-muted " href="/attendance-monitor-team/{{team.id}}-{{current_month}}-{{current_year}}" target="_parent">
                          <span class="sidenav-normal  ms-2  ps-1"> {{team.team_name}} </span>
                        </a>
                      </li>   
                    {% endfor %}
                  </ul>
                </div>
              </li>

              {% endif %}

              {% if perms.lateness_monitor %}
              <li class="nav-item">
                <a class="nav-link text-grey " data-bs-toggle="collapse" aria-expanded="false" href="#saltabdata" >
                  <span class="sidenav-mini-icon material-icons"> access_time </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Lateness Monitor </span>
                </a>
                <div class="collapse " id="saltabdata">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted " href="/lateness-monitor-company/{{current_month}}-{{current_year}}" target="_parent">
                        <span class="sidenav-normal  ms-2  ps-1"> Company Data </span>
                      </a>
                    </li>
                    {% for team in callers_teams %}
                      <li class="nav-item">
                        <a class="nav-link text-muted " href="/lateness-monitor-team/{{team.id}}-{{current_month}}-{{current_year}}" target="_parent">
                          <span class="sidenav-normal  ms-2  ps-1"> {{team.team_name}} </span>
                        </a>
                      </li>   
                    {% endfor %}
                  </ul>
                </div>
              </li>

              {% endif %}

              
            <!--
              <li class="nav-item">
                <a class="nav-link text-grey " href="/action-request" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> local_atm  </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Reward System </span>
                </a>
              </li>
              -->
            </ul>
          </div>
        </li>

        {% endif %}

        {% if perms.salaries_table or perms.adjusting_hours %}

        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#salariescategory" class="nav-link text-white {% if '/salaries-table' in request.path or '/adjusting-hours' in request.path  %}active{% endif %} " aria-controls="authExamples" role="button" aria-expanded="{% if '/salaries-table' in request.path or '/adjusting-hours' in request.path  %}true{% else %}false{% endif %}">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">monetization_on</i>
            <span class="nav-link-text ms-2 ps-1">Salaries</span>
          </a>
          <div class="collapse {% if '/salaries-table' in request.path or '/adjusting-hours' in request.path  %}show{% endif %}" id="salariescategory">
            <ul class="nav ">

              {% if perms.salaries_table%}

              <li class="nav-item">
                <a class="nav-link text-grey "  data-bs-toggle="collapse" aria-expanded="false" href="#lmdata" >
                  <span class="sidenav-mini-icon material-icons"> account_balance </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Salaries Table </span>
                </a>
                <div class="collapse " id="lmdata">
                  <ul class="nav nav-sm flex-column">
                    <li class="nav-item">
                      <a class="nav-link text-muted  "  href="/salaries-table-company/{{current_month}}-{{current_year}}" target="_parent" >
                        <span class="sidenav-normal  ms-2  ps-1"> Company Data </span>
                      </a>
                    </li>
                    {% for team in callers_teams %}
                      <li class="nav-item">
                        <a class="nav-link text-muted " href="/salaries-table-team/{{team.id}}-{{current_month}}-{{current_year}}" target="_parent">
                          <span class="sidenav-normal  ms-2  ps-1"> {{team.team_name}} </span>
                        </a>
                      </li>   
                    {% endfor %}
                  </ul>
                </div>
              </li>

              {% endif %}

              {% if perms.adjusting_hours %}

              <li class="nav-item {% if '/adjusting-hours' in request.path%}active{% endif %}">
                <a class="nav-link text-grey {% if '/adjusting-hours' in request.path%}active{% endif %}" href="/adjusting-hours" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> more_time </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Adjusting Hours </span>
                </a>
              </li>
              
              {% endif %}

              <!--
              <li class="nav-item ">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> grade </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Bonuses & Incentives <b class="caret"></b></span>
                </a>
              </li>
              -->

              <!--
              <li class="nav-item">
                <a class="nav-link text-grey " href="/reschedule-request" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> timeline </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Salary Changes History </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-grey " href="/action-request" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> local_atm  </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Reward System </span>
                </a>
              </li>-->
              
            </ul>
          </div>
        </li>

        {% endif %}


        

        <!--
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#scoringcategory" class="nav-link text-white " aria-controls="authExamples" role="button" aria-expanded="false">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">score </i>
            <span class="nav-link-text ms-2 ps-1">Scoring System</span>
          </a>
          <div class="collapse " id="scoringcategory">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> bar_chart   </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Performance Analytics <b class="caret"></b></span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> star_border </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Lead Scoring <b class="caret"></b></span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons medal"> workspace_premium  </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Recognition Programs </span>
                </a>
              </li>

              
            </ul>
          </div>
        </li>
        -->



        <!--
        <li class="nav-item">
          <a data-bs-toggle="collapse" href="#datacategory" class="nav-link text-white " aria-controls="authExamples" role="button" aria-expanded="false">
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}"> storage </i>
            <span class="nav-link-text ms-2 ps-1">Operations </span>
          </a>
          <div class="collapse " id="datacategory">
            <ul class="nav ">
              <li class="nav-item ">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> publish  </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Data Export/Import <b class="caret"></b></span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> insert_chart   </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Enhanced Reporting <b class="caret"></b></span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> pie_chart </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Demographic Insights </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-grey " href="javascript:;" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> find_in_page   </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Lead Enrichment </span>
                </a>
              </li>


              <li class="nav-item">
                <a class="nav-link text-grey " href="/action-request" target="_parent">
                  <span class="sidenav-mini-icon material-icons"> trending_down   </span>
                  <span class="sidenav-normal  ms-2  ps-1"> Attrition Rate </span>
                </a>
              </li>

              
              
            </ul>
          </div>
        </li>
        -->
        {% if perms.admin_home %}
        <li class="nav-item">
          <a class="nav-link"  href="/admin" target="_parent" >
            <i class="material-icons-round {% if page.brand == 'RTL' %}ms-2{% else %} me-2{% endif %}">admin_panel_settings</i>
            <span class="nav-link-text ms-2 ps-1">Admin</span>
          </a>
        </li>
        {% endif %}








        
        
       
        
    </div>
  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg position-sticky mt-4 top-1 px-0 mx-4 shadow-none border-radius-xl z-index-sticky" id="navbarBlur" data-scroll="true">
      <div class="container-fluid py-1 px-3">
        
        <div class="sidenav-toggler sidenav-toggler-inner d-xl-block d-none me-3">
          <a href="javascript:;" class="nav-link text-body p-0">
            <div class="sidenav-toggler-inner">
              <i class="sidenav-toggler-line"></i>
              <i class="sidenav-toggler-line"></i>
              <i class="sidenav-toggler-line"></i>
            </div>
          </a>
        </div>
        <div class="input-group input-group-outline" style="max-width: 150px;">
          <select class="form-control" data-user-id="{{ profile.id }}" 
          data-has-credentials="{% if profile.assigned_credentials %}{{ profile.assigned_credentials }}{% else %}none{% endif %}" name="work_status" id="work_status">
            {% if work_status %}
              <option value="ready" {% if work_status.current_status == 'ready' %}selected{% endif %}>Ready</option>
              <option value="break" {% if work_status.current_status == 'break' %}selected{% endif %}>Break</option>
              <option value="meeting" {% if work_status.current_status == 'meeting' %}selected{% endif %}>Meeting</option>
              <option value="offline" {% if work_status.current_status == 'offline' %}selected{% endif %}>Offline</option>
            {% else %}
            <option value="ready">Ready</option>
            <option value="break">Break</option>
            <option value="meeting">Meeting</option>
            <option value="offline" selected>Offline</option>
            {% endif %}
            </select>
        </div>
        <div class="input-group input-group-outline" style="max-width: 150px; margin-left: 20px;">
          <span id="ny-clock" class="badge filter bg-gradient-dark" data-color="info" >NY Clock: 00:00:00</span>
          <script>
            function formatTimeUnit(unit) {
                return unit.toString().padStart(2, '0');
            }
    
            function updateNYClock() {
                const nyClockElement = document.getElementById('ny-clock');
                const now = new Date();
                // Convert the current time to New York Time (Eastern Time)
                const nyOffset = -4; // New York Time is UTC-4 (consider daylight saving changes if needed)
                const nyTime = new Date(now.getTime() + (nyOffset * 60 * 60 * 1000));
    
                let hours = nyTime.getUTCHours();
                const minutes = nyTime.getUTCMinutes();
                const period = hours >= 12 ? 'PM' : 'AM';
    
                // Convert to 12-hour format
                hours = hours % 12;
                hours = hours ? hours : 12; // Handle midnight (0 hours)
    
                nyClockElement.innerText = `NY Clock: ${formatTimeUnit(hours)}:${formatTimeUnit(minutes)} ${period}`;
            }
    
            // Update the clock every minute
            setInterval(updateNYClock, 60000);
    
            // Initialize the clock immediately
            updateNYClock();
        </script>
        </div>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          
            <div class="ms-md-auto pe-md-3 d-flex align-items-center">
              
                <div class="input-group input-group-outline">
                  
                    <a href="/lead-submission" type="button" class="btn btn-info btn-sm">Lead Form</a>

                </div>
            </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item">
              <a href="/invoice/{{profile.id}}-{{current_month}}-{{current_year}}" class="nav-link text-body p-0 position-relative" target="_parent">
                <i class="material-icons me-sm-1">
                  monetization_on
            </i>
              </a>
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3">
              <a href="/settings" class="nav-link text-body p-0" target="_parent">
                <i class="material-icons fixed-plugin-button-nav cursor-pointer">
              account_circle
            </i>
              </a>
            </li>
            <li class="nav-item dropdown pe-2">
              <a href="javascript:;" class="nav-link text-body p-0 position-relative" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="material-icons cursor-pointer">
              notifications
            </i>
                <span class="position-absolute top-5 start-100 translate-middle badge rounded-pill bg-danger border border-white small py-1 px-2">
                  <span class="small">-</span>
                  <span class="visually-hidden">unread notifications</span>
                </span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end p-2 me-sm-n4" aria-labelledby="dropdownMenuButton">

              </ul>
            </li>
          </ul>
        </div>

      </div>
    </nav>
    <!-- End Navbar -->
        {% block body %}

        {% endblock %}
            
                

        <footer class="footer py-4  ">
            <div class="container-fluid">
            <div class="row align-items-center justify-content-lg-between">
                <div class="col-lg-6 mb-lg-0 mb-4">
                <div class="copyright text-center text-sm text-grey text-lg-start">
                    Copyright © <script>
                        document.write(new Date().getFullYear())
                    </script>,
                    All rights reserved {{settings.company_name}}
                </div>
                </div>
                <div class="col-lg-6">
                <ul class="nav nav-footer justify-content-center justify-content-lg-end">
                    <li class="nav-item">
                    <a href="{{settings.company_website}}" class="nav-link text-grey" target="_blank">Nedialo</a>
                    </li>
                    <li class="nav-item">
                    <a href="" class="nav-link text-grey" target="_blank">About Us</a>
                    </li>
                    <li class="nav-item">
                    <a href="{{setings.privacy}}" class="nav-link pe-0 text-grey" target="_blank">Privacy</a>
                    </li>
                    <li class="nav-item">
                    <a href="{{settings.terms}}" class="nav-link text-grey" target="_blank">Terms</a>
                    </li>
                </ul>
                </div>
            </div>
            </div>
        </footer>
    </div>
  </main>
  
  </div>
  <!--   Core JS Files   -->
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
  <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.min.js"></script>
  

  {% with slashes=request.path|length %}
  {% if slashes > 2 %}


  <script src="../static/js/core/popper.min.js"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../static/js/material-dashboard.js"></script>
  <script src="../static/js/material-dashboard.min.js?v=3.0.5"></script>
  <script src="../static/js/core/bootstrap.min.js"></script>

  <script src="../static/js/plugins/dragula/dragula.min.js"></script>
  <script src="../static/js/plugins/jkanban/jkanban.js"></script>
  <script src="../static/js/plugins/sweetalert.min.js"></script>
  <script src="../static/js/plugins/dropzone.min.js"></script>
  <script src="../static/js/plugins/chartjs.min.js"></script>
  <script src="../static/js/plugins/tilt.min.js"></script>

  <script src="../static/js/plugins/world.js"></script>
  <script src="../static/js/plugins/multistep-form.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  {% else %}

  <script src="static/js/core/popper.min.js"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="static/js/material-dashboard.js"></script>
  <script src="static/js/material-dashboard.min.js?v=3.0.5"></script>
  <script src="static/js/core/bootstrap.min.js"></script>
  <script src="static/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="static/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="static/js/plugins/dragula/dragula.min.js"></script>
  <script src="static/js/plugins/jkanban/jkanban.js"></script>
  <script src="static/js/plugins/sweetalert.min.js"></script>
  <script src="static/js/plugins/dropzone.min.js"></script>
  <script src="static/js/plugins/chartjs.min.js"></script>

  <script src="static/js/plugins/world.js"></script>
  <script src="static/js/plugins/multistep-form.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  {% endif %}
{% endwith %}
  
    <script>
      var win = navigator.platform.indexOf('Win') > -1;
      if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
          damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
      }

  </script>





  <script>

    document.addEventListener('DOMContentLoaded', function () {
    
       

       

        if (document.getElementById('work_status')) {
            var work_status = document.getElementById('work_status');
            const example = new Choices(work_status, {
                searchEnabled: false,
                searchChoices: false,
                shouldSort: false, // Disable sorting of choices
                
            });
        }

       
        

    });

</script>












</body>



</html>